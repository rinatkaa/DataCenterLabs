# Проектная работа
## Проектирование сетевой фабрики на основе VxLAN EVPN для IPv6 потребителей с eBGP в Underlay на оборудовании Arista

### Цели:
- Спроектировать фабрику в соответствии с архитекторой Клоза в среде эмуляции EVE-NG;
- Предложить типовые решения по подключению потребителей в режиме assymetric IRB, MC-LAG (ESI LAG);
- Предложить решение для подключения фабрики к внешней сети;
- Предложить варианты оборудования для использования в фабрике от Arista;

### Адресный план и особенности подготовки среды

Протокол eBGP настривается для работы с IPv6 адресацией.
      
- Общий план адресов ipv4: 10.0.0.0/8;
- Адреса для Loopback интерфейсов ipv4: 10.00[DC num].0.0/23, 512 устройств на 1 DC;
- #### Адреса для Loopback интерфейсов ipv6: fd::/61 в соответствии с таблицей №1;
- Линковые адреса ipv4: 10.10[DC_num].16.0/20, для линковых сетей использовать /31, младший адрес на стороне Spine;
- #### Линковые адреса ipv6: link-local
- Правила именования коммутаторов:
   - Spine Hostname: swsp-dc0[DC_num]-num
   - Leaf Hostname: swle-dc0[DC_num]-num
- Линковые интерфейсы для стека ipv4: основной интерфейс Eth [0..n] //сохраняю для будущих лаб, не используется в данной лабе
- #### Линковые интерфейсы для стека ipv6: подинтерфейс Eth [0..n].10, с тэгом 802.1q 10
  
#### Таблица №1 Имена хостов и адреса Loopback
| Коммутатор  | Hostname  |  IP Loopback 0 | IP Loopback 1 | BGP AS Number |
| :------------ |:---------------:| :-----:| :---------------:| :-------------:|
| Spine 1      | swsp-dc01-01 | 10.1.0.1 | fd:0:0:1::1/64 | 65000 |
| Spine 2      | swsp-dc01-02 |   10.1.0.2 | fd:0:0:2:1/64 | 65000 |
| Leaf 1 | swle-dc01-01 |    10.1.0.3 | fd:0:0:3::1/64 | 65001 |
| Leaf 2 | swle-dc01-02 |    10.1.0.4 | fd:0:0:4::1/64 | 65002 |
| Leaf 3 | swle-dc01-03 |    10.1.0.5 | fd:0:0:5::1/64 | 65003 |

#### Таблица №2 Настройки устройств подключенных к фабрике
| Клиентское устройство  | IPv4 адрес |  IPv4 шлюза |  IPv6 router |  IPv4 интерфейса хоста |
| :------------: |:---------------:| :-----:| :---------------:| :-----:| 
| Host-1 | - |     - | fd:0:0:8::1/64 |     SLAAC | 
| Host-2/LACP | - |    - | fd:0:0:11::1/64 |    SLAAC | 
| Host-2/LACP | - |    - | fd:0:0:11::1/64 |   SLAAC |

*** Host-2 подключен через клиентский коммутатор с включенной агрегацией аплинков LACP в режиме Active ***

#### Таблица №3 Настройки VRF
| VRF  | IPv6 network | RD | RT Both | VNI |
| :------------: |:---------------:| :-----:| :---------------:| :---------------:|
| VPN.6500.10 | fd:0:0:8::1/64 |     65000:10 | 65000:10 | 10010 |
| VPN.6500.20 | fd:0:0:11::1/64 |    65000:20 | 65000:20 | 10020 |

### Общая сетевая схема (L2/L3)

### Подключение потребителей по схеме assymetric IRB

### Подключение потребителей к двум Leaf устройствам (ESI LAG)

###  Подключение фабрики к внешей сети

### Оборудование Arista

### Конфигурации устройств

  
